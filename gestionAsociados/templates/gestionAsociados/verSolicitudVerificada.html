{% extends "gestionAsociados/base.html" %}

{% block title %} Jefe de operaciones {% endblock %}

{% block content %}
<div class="container bg-light">
    <div class="text-center">
        <h1>Solicitud <span class="badge bg-secondary">{{solicitud.id}}</span></h1>
    </div>
    <div class="row">
        <div class="col-12">
            <div class="card p-4 mt-3">
                <div class="card-title">
                    <h2>Datos Personales</h2>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Primer nombre:</h6></span>
                                <label><b>{{solicitud.nombre1}}</b></label><br>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Primer Apellido:</h6></span>
                                <label><b>{{solicitud.apellido1}}</b></label><br>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Fecha de nacimiento</h6></span>
                                <label><b>{{solicitud.fechaNac}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Email:</h6></span>
                                <label><b>{{solicitud.email}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Pais:</h6></span>
                                <label><b>{{solicitud.pais}}</b></label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Segundo nombre:</h6></span>
                                <label><b>{{solicitud.nombre2}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Primer Apellido:</h6></span>
                                <label><b>{{solicitud.apellido2}}</b></label><br>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Lugar de nacimiento:</h6></span>
                                <label><b>{{solicitud.lugarNac}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Departamento</h6></span>
                                <label><b>{{solicitud.departamento}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Personas que dependen de mi</h6></span>
                                <label><b>{{solicitud.personasDependientes}}</b></label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Tercer nombre:</h6></span>
                                <label><b>{{solicitud.nombre3}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>{{docIdentidad.tipoDoc}}:</h6></span>
                                <label><b>{{docIdentidad.numero}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Direccion</h6></span>
                                <label><b>{{solicitud.direccion}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Municipio</h6></span>
                                <label><b>{{solicitud.municipio}}</b></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12">
            <div class="card p-4 mt-3">
                <div class="card-title">
                    <h2>Datos de Vivienda</h2>
                    <div class="row">
                        <div class="col">
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Tenencia de vivienda:</h6></span>
                                <label><b>{{vivienda.tenenciaVivienda}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Propietario:</h6></span>
                                <label><b>{{vivienda.propietario}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Parentesco:</h6></span>
                                <label><b>{{vivienda.parentesco}}</b></label>
                            </div>
                            <div class="m-1">
                                <span class="badge rounded-pill bg-light text-dark"><h6>Tiempo de residencia:</h6></span>
                                <label><b>{{vivienda.tiempo}}</b></label>
                            </div>
                        </div>
                        <div class="col">
                            <input type="text" id="myLat" hidden value="{{vivienda.lat}}">
                            <input type="text" id="myLng" hidden value="{{vivienda.lng}}">
                            <div id="map2" style="width: 100%;
                            height: 400px;"></div>
                            <script>
                                function initMap() {
                                  var myLat = document.getElementById("myLat").value;
                                  var myLng = document.getElementById("myLng").value;
                                  var lat=parseFloat(myLat)
                                  var lng=parseFloat(myLng)
          
                                  //var test= {lat: myLat, lng: myLng};
                                  var test= {lat: lat, lng: lng};
                                  console.log(myLat)
                                  console.log(myLng)
                                  console.log(lat)
                                  console.log(lng)
                                  var map = new google.maps.Map(document.getElementById('map2'), {
                                    zoom: 4,
                                    center: test
                                  });
                                  var marker = new google.maps.Marker({
                                    position: test,
                                    map: map
                                  });
                                }
                              </script>
                              <script async defer
                              src=
                                   "https://maps.googleapis.com/maps/api/js?key=AIzaSyCFodwYnV50ZvlLs9p57pVLiQJcTGIJSNc&callback=initMap">
                              </script>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12">
            <div class="card p-4 mt-3">
                <div class="card-title">
                    <h2>Datos del Trabajo</h2>
                    <br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Tipo:</h6></span>
                    <label><b>{{trab.tipo}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Lugar de Trabajo:</h6></span>
                    <label><b>{{trab.lugarTrabajo}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Direccion de trabajo:</h6></span>
                    <label><b>{{trab.direccion}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Telefono de trabajo:</h6></span>
                    <label><b>{{trab.telefono}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Email de trabajo:</h6></span>
                    <label><b>{{trab.email}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Sueldo:</h6></span>
                    <label><b>{{trab.sueldo}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Cargo:</h6></span>
                    <label><b>{{trab.cargo}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Jefe:</h6></span>
                    <label><b>{{trab.jefe}}</b></label>
                    <br><br>
                </div>
            </div>
            {% if neg != "" %}
            <div class="col-12">
                <div class="card p-4 mt-3">
                    <div class="card-title">
                        <h2>Negocio</h2>
                        <br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Nombre del negocio:</h6></span>
                    <label><b>{{neg.nombreNegocio}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Direccion del negocio:</h6></span>
                    <label><b>{{neg.direccion}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Telefono del negocio:</h6></span>
                    <label><b>{{neg.telefono}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Email del negocio:</h6></span>
                    <label><b>{{neg.email}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Numero de Registro:</h6></span>
                    <label><b>{{neg.numRegistro}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Giro del negocio:</h6></span>
                    <label><b>{{neg.giro}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Numero de Trabajadores:</h6></span>
                    <label><b>{{neg.numTrabajadores}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Capital:</h6></span>
                    <label><b>{{neg.capital}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Mercancia:</h6></span>
                    <label><b>{{neg.mercancia}}</b></label>
                    <br><br>
                    <span class="badge rounded-pill bg-light text-dark"><h6>Mobiliario o equipos:</h6></span>
                    <label><b>{{neg.mobiliarioEquipo}}</b></label>
                    <br><br>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
        <div class="col-12">
            <div class="card p-4 mt-3">
                <div class="card-title">
                    <h2>Conyuge</h2>
                    <div class="col">
                        <span class="badge rounded-pill bg-light text-dark"><h6>Nombre del conyuge:</h6></span>
                      <label><b>{{con.nombre}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Apellido del conyuge:</h6></span>
                      <label><b>{{con.apellido}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Documento de identidad:</h6></span>
                      <label><b>{{con.docIdentidad}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Telefono del conyuge:</h6></span>
                      <label><b>{{con.telefono}}</b></label>
                      <br><br>
                      </div>
                </div>
            </div>
        </div>
        <div class="col-12">
            <div class="card p-4 mt-3">
                <div class="card-title">
                    <h2>Familiares</h2>
                    {% for fam in familiar %}
                    <span class="badge bg-success"><h6>Familiar {{ forloop.counter }}</h6></span>
                    
                    <br><br>
                    <div class="col">
                      <span class="badge rounded-pill bg-light text-dark"><h6>Parentesco familiar:</h6></span>
                      <label><b>{{fam.parentesco}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Nombre de familiar:</h6></span>
                      <label><b>{{fam.nombre}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Apellido de familiar:</h6></span>
                      <label><b>{{fam.apellido}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Telefono de familiar:</h6></span>
                      <label><b>{{fam.telefono}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Email de familiar:</h6></span>
                      <label><b>{{fam.email}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Departamento de familiar</h6></span>
                             <!-- Empezar for de tabla departamentos -->
                             {% for depto in departamento %}
                              <!-- Salida de id de depto correspondiente en IF -->
                             {% if depto.id == fam.departamento_id|add:"0" %}
                             <label><b>{{depto.nombre}}</b></label>
                             
                             {% endif %}
                             {% endfor %}
                             <br><br>
                             <span class="badge rounded-pill bg-light text-dark"><h6>Municipio de familiar:</h6></span>
                           {% for muni in municipio %}
                           {% if muni.id == fam.municipio_id|add:"0" %}
                           <label><b>{{muni.nombre}}</b></label>
                           {% endif %}
                           {% endfor %}
                          
                    </div>
                    <br>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="col-12">
            <div class="card p-4 mt-3">
                <div class="card-title">
                    <h2>Referencias personales</h2>
                    {% for ref in referenciaPersonal %}
                    <span class="badge bg-warning text-dark"><h6>Referencia {{ forloop.counter }}</h6></span>
                    
                    <br><br>
                    <div class="col">
                      <span class="badge rounded-pill bg-light text-dark"><h6>Nombre de referencia:</h6></span>
                      <label><b>{{ref.nombre}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Apellido de referencia:</h6></span>
                      <label><b>{{ref.apellido}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Telefono de referencia:</h6></span>
                      <label><b>{{ref.telefono}}</b></label>
                      <br><br>
                      <span class="badge rounded-pill bg-light text-dark"><h6>Email de referencia:</h6></span>
                      <label><b>{{ref.email}}</b></label>
                      <br><br>
                      
                    </div>
                    <br>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="col-12">
            <div class="card p-4 mt-3">
                <div class="card-title">
                    <h2>Beneficiarios</h2>
                    {% for ben in beneficiario %}
                <span class="badge bg-primary"><h6>Beneficiario {{ forloop.counter }}</h6></span>
                <br><br>
                <div class="col">
                  <span class="badge rounded-pill bg-light text-dark"><h6>Parentesco de beneficiario:</h6></span>
                  <label><b>{{ben.parentesco}}</b></label>
                  <br><br>
                  <span class="badge rounded-pill bg-light text-dark"><h6>Nombre de beneficiario:</h6></span>
                  <label><b>{{ben.nombre}}</b></label>
                  <br><br>
                  <span class="badge rounded-pill bg-light text-dark"><h6>Apellido de benificiario:</h6></span>
                  <label><b>{{ben.apellido}}</b></label>
                  <br><br>
                  <span class="badge rounded-pill bg-light text-dark"><h6>Beneficio</h6></span>
                  <label><b>{{ben.beneficio}}</b></label>
                  <br><br>
                  
                </div>
            
                {% endfor %}
                </div>
            </div>
        </div>
        <div class="col-12">
            <div class="card p-4 mt-3">
                <div class="card-title">
                    <h2>Documentos</h2>
                    {% for doc in docAnexo %}
                <div class="col">
                  <span class="badge bg-info text-dark"><h6>Documento {{ forloop.counter }}</h6></span>
                  <span class="badge rounded-pill bg-light text-dark"><h6>Nombre de documento: </h6></span>
                  <label><b>{{doc.nombre}}</b></label>
                  <br><br>
                  <span class="badge rounded-pill bg-light text-dark"><h6>Descarga de documento: </h6></span>
                  <a href="{{ doc.doc.url }}" download>{{doc.doc}}</a>
                  <br><br>
                </div>
                {% endfor %}
                </div>
            </div>
        </div>
        <div class="col-12">
            <form action="" method="post">{% csrf_token %}
                <button method="POST" class="btn btn-success btn-lg" type="submit" name="aprobar" value="True" >Aprobar</button>
                <button method="POST" class="btn btn-danger btn-lg" type="submit" name="denegar" value="False">Denegar</button>
            </form>
            <button>Volver</button>
        </div>
    </div>
</div>

{% endblock %}